<% if @user.errors.any? %>
  <div id="error_explanation">
    <h2><%= pluralize(@user.errors.count, "error") %> prohibited this <%= @user.name %> from being saved:</h2>
    <ul>
      <% @user.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
    </ul>
  </div>
<% end %>
<%= form_with(model: @user, local: true, url:confirm_action) do |f| %>
  <div class='add_profile_layout'>
    <div class="table_wrapper slide_left">
      <table>
        <tbody>
          <tr>
            <td><%= f.label :"名前" %></td>
            <td><%= f.text_field :name %></td>
          </tr>
          <tr>
            <td><%= f.label :"メールアドレス" %></td>
            <td><%= f.email_field :email %></td>
          </tr>
          <tr>
            <td><%= f.label :"パスワード"%></td>
            <td><%= f.password_field :password %></td>
          </tr>
          <tr>
            <td><%= f.label :"パスワード確認用" %></td>
            <td><%= f.password_field :password_confirmation %></td>
          </tr>
        </tbody>
      </table>
      <div>
        <% if current_user.id = @user.id %>
          <%= f.submit "入力内容確認", class: "btn btn-warning #{'side_margin' if @user.id?} #{'button_middle' if !@user.id?}" %>
          <% if @user.id? %>
            <%= link_to '戻る', user_path(@user.id), class: "btn btn-warning side_margin" %>
          <% end %>
        <% end %>
      </div>
    </div>
    <% if @user.id? %>
      <div class='slide_light'>
        <div class="image_area">
          <p>プロフィール画像</p>
          <%= f.file_field :image %>
          <%= image_tag(@user.image.url) if @user.image && @user.image.url %>
          <%= f.hidden_field :image_cache %>
        </div>
      </div>
    <% end %>
  </div>  
<% end %>